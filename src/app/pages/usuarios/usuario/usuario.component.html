<div *ngIf='showUsuario'>
  <div class="container">
    <div class="card bg-light contenedor_usuarios mb-3">
      <div class="card-header">
        <span class="row justify-content-between">
          <div class="col-4">
            <span class="titulo-usuario">{{usuario.nombre}}</span>
          </div>
          <!-- <div class="col-4">
            <span>
              <i class="fa fa-cogs" aria-hidden="true"></i>
              <span class="enlaces" (click)="editarUsuario(usuario)">Editar</span>
            </span>
            <span>
              <i class="fa fa-trash" aria-hidden="true"></i>
              <span class="enlaces" (click)="eliminarUsuario(usuario)">Eliminar</span>
            </span>
          </div> -->
          <div>
            <a *ngFor="let item of starList; let i=index ">
              <i *ngIf="i < usuario.clasificacion.valor" class="fa" [ngClass]="{'fa-star':true}"></i>
              <i *ngIf="i >= usuario.clasificacion.valor" class="fa" [ngClass]="{'fa-star-o':true}"></i>
            </a>
          </div>
        </span>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-1">
            <img alt="avatar" [src]="usuario.avatar |imagen:'usuario'" style="width: 50px !important">
          </div>
          <div class="col-md-5">

            <p id="correo">
              {{usuario.email}}
            </p>
          </div>
          <div class="col-md-4">
            <p id="commit">Commits: {{commitsTotal}} Total</p>
            <div *ngIf="usuario.tipo!='gitlab'">
              <p>Lenguajes de programacion</p>
              <span *ngFor="let item of lenguajes">
              </span>
            </div>

          </div>
          <div class="col-md-2">
            <div>
              <span>Califica este usuario</span>
            </div>
            <div id="clasificacion">
              <a *ngFor="let item of starList; let i=index " (click)="setStar(i)">
                <i *ngIf="!item" class="fa" [ngClass]="{'fa-star':true}"></i>
                <i *ngIf="item" class="fa" [ngClass]="{'fa-star-o':true}"></i>
              </a>
              <button mat-button (click)="guardarClasificacion()" [disabled]="buttonClasi" color="primary">
                <mat-icon mat-list-icon>done</mat-icon>
                Guardar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="mb-3" *ngIf="!showRepositorios">
      <div *ngIf="isPropietario">
        <h4>Usted no cuenta con repositorios Adicione:</h4>
        <div class="card-deck">
          <div class="card">
            <div class="card-body">
              <button mat-button [routerLink]="['/usuarios/ajustes']" [queryParams]="{index: 1}" color="primary">
                <mat-icon mat-list-icon>add</mat-icon>
                Adicionar
              </button>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="!isPropietario">
        <h4>El usuario no cuenta con Repositorios</h4>
      </div>
    </div>
    <div class="mb-3" *ngIf="showRepositorios">
      <div class="card-deck">
        <div class="card">
          <div class="card-body">
            <h4 id="titulo_repositorio" class="card-title">Repositorios</h4>
            <!-- <table class="table table-hover table-inverse table-responsive" *ngIf="usuario.tipo!='local'"> -->
            <table datatable [dtOptions]="dtOptions" class="table table-hover table-inverse table-responsive">
              <thead class="thead-inverse">
                <tr>
                  <th></th>
                  <th>Repositorios</th>
                  <th>Url</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let repo of repositorios" (click)="detalleRepositorio(repo,usuario.tipo)" style="cursor: pointer">
                  <td scope="row">
                    <img [src]="repo.avatar" alt="" height="30" width="30"> </td>
                  <td>
                    <a target="#">{{repo.nombre}} </a>
                  </td>
                  <td>
                    <a *ngIf="usuario.tipo=='gitlab'" href="{{repo.html_url}}" target="#">{{repo.html_url}} </a>
                    <a *ngIf="usuario.tipo=='github'" href="{{repo.html_url}}" target="#">{{repo.html_url}} </a>
                  </td>
                </tr>
              </tbody>
            </table>
            <div *ngIf="!showRepositorios">
              <p>No cuenta con repositorios </p>
            </div>
          </div>
        </div>
        <div class="card" *ngIf="showUsuarios">
          <div class="card-body">
            <h4>{{repoSelect.nombre}}</h4>
            <table class="table table-hover table-inverse table-responsive">
              <thead class="thead-inverse">
                <tr>
                  <th></th>
                  <th>Usuario</th>
                  <th>Url</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let value of usuarioRepositorio">
                  <td scope="row">
                    <img src="{{value.avatar_autor}}" alt="" height="30" width="30">
                  </td>
                  <td>{{value.autor}}</td>
                  <td>
                    <a href="{{value.web_url_autor}}" target="#">{{value.web_url_autor}}</a>
                  </td>
                </tr>
              </tbody>
            </table>
            <p>Primer commit: {{primerCommit | date:'medium'}}</p>
            <p>Reciente Commit: {{UltimoCommit | date:'medium'}}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="mb-3" *ngIf="showRepositorios">
      <h4>commits</h4>
      <div class="row" *ngIf="showLenguajes">
        <div class="col-xl-4 col-md-12">
          <div class="card">
            <div class="card-body">
              Commits por Lenguajes
              <chart-lenguajes [pieChartLabels]="pieChartLabels" [pieChartData]="pieChartData">
              </chart-lenguajes>
            </div>
          </div>
        </div>
        <div class="col-xl-8 col-md-12">
          <div class="card" *ngIf="dataRepo$">
            <div class="card-body col">
              <span>Commits por Repositorio</span>
              <!-- <chart-codigo [data]="data$">
              </chart-codigo> -->
              <line-chart class="chart-commit" [config]="config$" [data]="dataRepo$"></line-chart>
            </div>
          </div>
        </div>
      </div>
      <h4>Historial de Desarrollo:</h4>
      <div class="card-deck">
        <div class="card" *ngIf="data$">
          <div class="card-body">
            <span>Commits por repositorio</span>
            <!-- <chart-codigo [data]="data$">
            </chart-codigo> -->
            <line-chart class="chart-commit" [config]="configRepo$" [data]="data$"></line-chart>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>